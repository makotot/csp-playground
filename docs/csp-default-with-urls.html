<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://cdn.jsdelivr.net https://fonts.googleapis.com https://fonts.gstatic.com">
    <title>CSP - default-src with URL Patterns ãƒ†ã‚¹ãƒˆ</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .status-box {
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .error {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
        }
        .success {
            background-color: #e8f5e9;
            border-left: 4px solid #4CAF50;
        }
        .warning {
            background-color: #fff3e0;
            border-left: 4px solid #ff9800;
        }
        code {
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            display: inline-block;
            word-break: break-all;
        }
        .code-block {
            background-color: #fff3cd;
            border: 2px solid #ff9800;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            overflow-x: auto;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: #2196F3;
            text-decoration: none;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        ul, ol {
            line-height: 1.6;
        }
        .pattern-example {
            margin: 10px 0;
            padding: 10px;
            background-color: #e3f2fd;
            border-left: 3px solid #2196F3;
        }
    </style>
</head>
<body>
    <h1>ğŸ”’ default-src with URL Patterns ãƒ†ã‚¹ãƒˆ</h1>

    <div class="status-box">
        <h2>CSPãƒãƒªã‚·ãƒ¼</h2>
        <div class="code-block">
            <code>Content-Security-Policy: default-src 'self' https://cdn.jsdelivr.net https://fonts.googleapis.com https://fonts.gstatic.com</code>
        </div>
        <p style="margin-top: 15px;">
            ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯åŒä¸€ã‚ªãƒªã‚¸ãƒ³ï¼ˆ'self'ï¼‰ã«åŠ ãˆã¦ã€ç‰¹å®šã®å¤–éƒ¨URLã‹ã‚‰ã®ãƒªã‚½ãƒ¼ã‚¹èª­ã¿è¾¼ã¿ãŒè¨±å¯ã•ã‚Œã¾ã™ã€‚
        </p>
    </div>

    <div class="status-box success">
        <h3>âœ… å¤–éƒ¨ãƒ•ã‚©ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ</h3>
        <p style="font-family: 'Roboto', sans-serif; font-size: 18px;">
            ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã¯Google Fontsã®ã€ŒRobotoã€ãƒ•ã‚©ãƒ³ãƒˆã§è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚<br>
            ãƒ•ã‚©ãƒ³ãƒˆãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚Œã°ã€CSPãŒæœŸå¾…é€šã‚Šã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚
        </p>
        <p style="font-size: 14px; color: #666; margin-top: 10px;">
            è¨±å¯ã•ã‚ŒãŸURL: <code>https://fonts.googleapis.com</code> ã¨ <code>https://fonts.gstatic.com</code>
        </p>
    </div>

    <div class="status-box">
        <h3>ğŸ“‹ URL ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¾‹</h3>
        <p>ä»¥ä¸‹ã¯æ§˜ã€…ãªURLãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä½¿ç”¨ä¾‹ã§ã™ï¼š</p>

        <div class="pattern-example">
            <strong>1. ç‰¹å®šã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨±å¯</strong><br>
            <code>default-src 'self' https://cdn.example.com</code><br>
            <small>æŒ‡å®šã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰ã®ãƒªã‚½ãƒ¼ã‚¹èª­ã¿è¾¼ã¿ã®ã¿è¨±å¯</small>
        </div>

        <div class="pattern-example">
            <strong>2. ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã§ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨±å¯</strong><br>
            <code>default-src 'self' https://*.example.com</code><br>
            <small>example.comã®ã™ã¹ã¦ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨±å¯ï¼ˆapi.example.comã€cdn.example.com ãªã©ï¼‰</small>
        </div>

        <div class="pattern-example">
            <strong>3. ã™ã¹ã¦ã®HTTPSã‚’è¨±å¯</strong><br>
            <code>default-src 'self' https:</code><br>
            <small>ã™ã¹ã¦ã®HTTPSãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®URLã‚’è¨±å¯ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šæ³¨æ„ãŒå¿…è¦ï¼‰</small>
        </div>

        <div class="pattern-example">
            <strong>4. è¤‡æ•°ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨±å¯</strong><br>
            <code>default-src 'self' https://cdn1.example.com https://cdn2.example.com</code><br>
            <small>è¤‡æ•°ã®ç•°ãªã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å€‹åˆ¥ã«æŒ‡å®š</small>
        </div>

        <div class="pattern-example">
            <strong>5. ãƒãƒ¼ãƒˆç•ªå·ã‚’æŒ‡å®š</strong><br>
            <code>default-src 'self' https://example.com:8443</code><br>
            <small>ç‰¹å®šã®ãƒãƒ¼ãƒˆç•ªå·ã‚’æŒã¤URLã®ã¿è¨±å¯</small>
        </div>

        <div class="pattern-example">
            <strong>6. ãƒ‘ã‚¹ã‚’æŒ‡å®š</strong><br>
            <code>default-src 'self' https://cdn.example.com/assets/</code><br>
            <small>ç‰¹å®šã®ãƒ‘ã‚¹é…ä¸‹ã®ãƒªã‚½ãƒ¼ã‚¹ã®ã¿è¨±å¯</small>
        </div>
    </div>

    <div class="status-box">
        <h3>ğŸ¯ ã“ã®ãƒšãƒ¼ã‚¸ã§è¨±å¯ã•ã‚Œã¦ã„ã‚‹ã‚½ãƒ¼ã‚¹</h3>
        <ul>
            <li><code>'self'</code> - åŒä¸€ã‚ªãƒªã‚¸ãƒ³ã®ãƒªã‚½ãƒ¼ã‚¹</li>
            <li><code>https://cdn.jsdelivr.net</code> - jsDelivrCDNï¼ˆJavaScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒªç”¨ï¼‰</li>
            <li><code>https://fonts.googleapis.com</code> - Google Fonts CSS</li>
            <li><code>https://fonts.gstatic.com</code> - Google Fontsã®ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«</li>
        </ul>
    </div>

    <div class="status-box error">
        <h3>âŒ ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ã‚‚ã®</h3>
        <ul>
            <li>ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ'unsafe-inline'ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„ï¼‰</li>
            <li>è¨±å¯ãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã¦ã„ãªã„å¤–éƒ¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒªã‚½ãƒ¼ã‚¹</li>
            <li>HTTPãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆHTTPSã®ã¿è¨±å¯ï¼‰</li>
            <li>data: URI ã‚¹ã‚­ãƒ¼ãƒ ï¼ˆæ˜ç¤ºçš„ã«è¨±å¯ã•ã‚Œã¦ã„ãªã„å ´åˆï¼‰</li>
        </ul>
    </div>

    <div class="status-box warning">
        <h3>âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ³¨æ„ç‚¹</h3>
        <ul>
            <li><strong>ä¿¡é ¼ã§ãã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿</strong>ã‚’è¨±å¯ãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¦ãã ã•ã„</li>
            <li><strong>ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ï¼ˆ*ï¼‰ã®ä½¿ç”¨ã¯æ…é‡ã«</strong>ï¼šåºƒç¯„å›²ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨±å¯ã™ã‚‹ã¨æ”»æ’ƒé¢ãŒå¢—åŠ ã—ã¾ã™</li>
            <li><strong>https: ã®ä½¿ç”¨ã¯é¿ã‘ã‚‹</strong>ï¼šã™ã¹ã¦ã®HTTPS URLã‚’è¨±å¯ã™ã‚‹ã®ã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“</li>
            <li><strong>æœ€å°æ¨©é™ã®åŸå‰‡</strong>ï¼šå¿…è¦æœ€å°é™ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿ã‚’è¨±å¯ã—ã¾ã™</li>
            <li><strong>CDNã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ</strong>ï¼šSRI (Subresource Integrity) ã®ä½¿ç”¨ã‚‚æ¤œè¨ã—ã¦ãã ã•ã„</li>
        </ul>
    </div>

    <div class="status-box">
        <h3>ğŸ” ç¢ºèªæ–¹æ³•</h3>
        <ol>
            <li>ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ãï¼ˆF12ã‚­ãƒ¼ï¼‰</li>
            <li>Consoleã‚¿ãƒ–ã‚’ç¢ºèª</li>
            <li>CSPé•åã®ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª</li>
            <li>Networkã‚¿ãƒ–ã§å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</li>
        </ol>
        <p style="margin-top: 10px;">
            <strong>æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œï¼š</strong><br>
            Google FontsãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã€ãƒ•ã‚©ãƒ³ãƒˆãŒé©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
        </p>
    </div>

    <div class="status-box">
        <h3>ğŸ“š ã‚ˆã‚Šè©³ç´°ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–</h3>
        <p>
            <code>default-src</code>ã¯ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã«é©ç”¨ã•ã‚Œã¾ã™ãŒã€
            ã‚ˆã‚Šç´°ã‹ãåˆ¶å¾¡ã—ãŸã„å ´åˆã¯å€‹åˆ¥ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š
        </p>
        <ul>
            <li><code>script-src</code> - JavaScriptã®èª­ã¿è¾¼ã¿å…ƒã‚’åˆ¶å¾¡</li>
            <li><code>style-src</code> - CSSã®èª­ã¿è¾¼ã¿å…ƒã‚’åˆ¶å¾¡</li>
            <li><code>img-src</code> - ç”»åƒã®èª­ã¿è¾¼ã¿å…ƒã‚’åˆ¶å¾¡</li>
            <li><code>font-src</code> - ãƒ•ã‚©ãƒ³ãƒˆã®èª­ã¿è¾¼ã¿å…ƒã‚’åˆ¶å¾¡</li>
            <li><code>connect-src</code> - fetch, XHR, WebSocketã®æ¥ç¶šå…ˆã‚’åˆ¶å¾¡</li>
        </ul>
        <p style="margin-top: 10px;">
            ä¾‹ï¼š<code>default-src 'self'; script-src 'self' https://cdn.jsdelivr.net; font-src 'self' https://fonts.gstatic.com</code>
        </p>
    </div>

    <a href="index.html" class="back-link">â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>

    <!-- ã“ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ -->
    <script>
        console.log('ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ï¼ˆCSPã«ã‚ˆã£ã¦ãƒ–ãƒ­ãƒƒã‚¯ï¼‰');
        alert('ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã•ã‚ŒãŸå ´åˆã€CSPãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ã¾ã›ã‚“');
    </script>
</body>
</html>
