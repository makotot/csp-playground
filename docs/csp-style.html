<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self'; script-src 'self' 'unsafe-inline'">
    <title>CSP - ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ãƒ†ã‚¹ãƒˆ</title>
    <!-- ã“ã®styleã‚¿ã‚°ã¯CSPã«ã‚ˆã£ã¦ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .status-box {
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .error {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
        }
        .success {
            background-color: #e8f5e9;
            border-left: 4px solid #4CAF50;
        }
        code {
            background-color: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: #2196F3;
            text-decoration: none;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        .test-inline-style {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ğŸ”’ ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ†ã‚¹ãƒˆ</h1>

    <div class="status-box">
        <h2>CSPãƒãƒªã‚·ãƒ¼</h2>
        <code>Content-Security-Policy: default-src 'self'; style-src 'self'; script-src 'self' 'unsafe-inline'</code>
        <p style="margin-top: 10px;">
            ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆ&lt;style&gt;ã‚¿ã‚°ã‚„styleå±æ€§ï¼‰ãŒ<strong>ãƒ–ãƒ­ãƒƒã‚¯</strong>ã•ã‚Œã¾ã™ã€‚
        </p>
    </div>

    <div class="status-box error">
        <h3>çµæœ</h3>
        <p>ã“ã®ãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒé©ç”¨ã•ã‚Œã¦ã„ãªã„å ´åˆã€CSPãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ã¾ã™ã€‚</p>
        <p class="test-inline-style">ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã¯èµ¤è‰²ã§å¤ªå­—ã«ãªã‚‹ã¯ãšã§ã™ãŒã€ã‚¹ã‚¿ã‚¤ãƒ«ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

        <!-- ã“ã®styleå±æ€§ã‚‚ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ -->
        <p style="color: blue; font-size: 20px;">
            ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã¯é’è‰²ã§å¤§ããªãƒ•ã‚©ãƒ³ãƒˆã«ãªã‚‹ã¯ãšã§ã™ãŒã€styleå±æ€§ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™ã€‚
        </p>
    </div>

    <div class="status-box">
        <h3>ã‚¹ã‚¿ã‚¤ãƒ«ã®å•é¡Œ</h3>
        <p>
            style-src 'self' ã®è¨­å®šã«ã‚ˆã‚Šã€ä»¥ä¸‹ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ï¼š
        </p>
        <ul>
            <li>&lt;style&gt;ã‚¿ã‚°å†…ã®CSS</li>
            <li>HTMLè¦ç´ ã®styleå±æ€§</li>
            <li>JavaScriptã‹ã‚‰ã®ç›´æ¥çš„ãªã‚¹ã‚¿ã‚¤ãƒ«æ“ä½œï¼ˆä¸€éƒ¨ï¼‰</li>
        </ul>
        <p>
            <strong>è§£æ±ºæ–¹æ³•:</strong>
        </p>
        <ul>
            <li>å¤–éƒ¨CSSãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹</li>
            <li>style-src ã« 'unsafe-inline' ã‚’è¿½åŠ ã™ã‚‹ï¼ˆéæ¨å¥¨ï¼‰</li>
            <li>style-src ã« nonce ã¾ãŸã¯ hash ã‚’ä½¿ç”¨ã™ã‚‹</li>
        </ul>
    </div>

    <div class="status-box">
        <h3>ç¢ºèªæ–¹æ³•</h3>
        <ol>
            <li>ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ãï¼ˆF12ã‚­ãƒ¼ï¼‰</li>
            <li>Consoleã‚¿ãƒ–ã‚’ç¢ºèª</li>
            <li>CSPé•åã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</li>
            <li>ãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒé©ç”¨ã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’è¦–è¦šçš„ã«ç¢ºèª</li>
        </ol>
        <p>
            <strong>æœŸå¾…ã•ã‚Œã‚‹ã‚¨ãƒ©ãƒ¼:</strong><br>
            <code>Refused to apply inline style because it violates the following Content Security Policy directive...</code>
        </p>
    </div>

    <a href="index.html" class="back-link">â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>

    <script>
        // JavaScriptã‹ã‚‰ã®ã‚¹ã‚¿ã‚¤ãƒ«æ“ä½œã‚‚ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
        try {
            const testDiv = document.createElement('div');
            testDiv.style.color = 'green';
            testDiv.textContent = 'ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã¯ç·‘è‰²ã«ãªã‚‹ã¯ãšã§ã™';
            document.body.appendChild(testDiv);
            console.log('JavaScriptã‹ã‚‰ã®ã‚¹ã‚¿ã‚¤ãƒ«æ“ä½œãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ');
        } catch (e) {
            console.error('ã‚¹ã‚¿ã‚¤ãƒ«æ“ä½œã‚¨ãƒ©ãƒ¼:', e);
        }
    </script>
</body>
</html>
